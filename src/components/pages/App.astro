---
import LayoutBase from '@layouts/LayoutBase.astro';
import Layout from '@layouts/Layout.astro';
import Main from '@components/Main.astro';
import { supabase } from '@lib/supabase';

const { cookies } = Astro;
const user = cookies.get('sb-token');
const { data } = await supabase.auth.getUser();

const isLogged = data?.user !== null && user?.value !== undefined;
---

{
	!isLogged ? (
		<LayoutBase
			title="Spell Checker"
			description="Spell Cheker App"
		>
			<section class="flex h-screen w-screen flex-col justify-center px-6 py-12 lg:px-8 bg-gray-800">
				<main class="h-screen w-full bg-gray-800 flex-1 flex flex-col gap-4 items-center p-4 pt-16 justify-start sm:justify-center  m-x-auto text-white">
					<h1 class="text-2xl sm:text-4xl font-bold text-center">
						Spell checker
					</h1>
					<ul class="flex gap-6 items-center font-bold text-xl mt-4">
						<p class="mt-6 text-s font-light">You can</p>
						<li class="mt-6">
							<a href="/register">Register</a>
						</li>
						<p class="mt-6 text-s font-light">or</p>
						<li class="mt-6">
							<a href="/signin">Log In</a>
						</li>
					</ul>
				</main>
			</section>
		</LayoutBase>
	) : (
		<Layout title="Spell Checker" description="Spell Cheker App" {isLogged}>
			<Main />
		</Layout>
	)
}
